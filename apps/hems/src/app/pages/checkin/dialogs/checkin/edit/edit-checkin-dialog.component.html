<form (ngSubmit)="update()" [formGroup]="form" data-cy="update-checkin-dialog">
  <div class="header">
    <h2>Update Luggage</h2>
  </div>
  <hr />

  <div class="input-container">
    <div class="row-container">
      <!-- Room + room status -->
      <mat-form-field class="input" appearance="fill">
        <mat-label class="input-label">Room</mat-label>
        <input
          type="text"
          data-cy="update-checkin-room-input"
          formControlName="room"
          matInput
          placeholder="123"
        />
        <mat-error *ngIf="form.get('name')?.invalid && form.get('name')?.dirty">
          Required
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Room Status</mat-label>
        <mat-select
          formControlName="roomReady"
          data-cy="update-checkin-room-status"
        >
          <mat-option value="false">Not Ready</mat-option>
          <mat-option value="true">Ready</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="row-container">
      <!--  name -->
      <mat-form-field class="input full-width" appearance="fill">
        <mat-label class="input-label">Name</mat-label>
        <input
          type="text"
          data-cy="update-checkin-name"
          formControlName="name"
          matInput
          placeholder="John Doe"
        />
        <mat-error *ngIf="form.get('name')?.invalid && form.get('name')?.dirty">
          Required
        </mat-error>
      </mat-form-field>
    </div>
    <div class="row-container">
      <!-- Arrival time + nr of bags -->
      <mat-form-field>
        <input
          matInput
          [ngxMatDatetimePicker]="pickerArrival"
          placeholder="Arrival Time"
          formControlName="arrivalTime"
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="$any(pickerArrival)"
        ></mat-datepicker-toggle>
        <ngx-mat-datetime-picker
          #pickerArrival
          [showSpinners]="true"
          [showSeconds]="false"
          [touchUi]="true"
        >
        </ngx-mat-datetime-picker>
      </mat-form-field>
      <mat-form-field class="input" appearance="fill">
        <mat-label class="input-label">Nr of bags</mat-label>
        <input
          type="text"
          data-cy="update-checkin-room-input"
          formControlName="bags"
          matInput
          placeholder="1+3"
        />
        <mat-error *ngIf="form.get('bags')?.invalid && form.get('bags')?.dirty">
          Required
        </mat-error>
      </mat-form-field>
    </div>
    <div class="row-container">
      <!-- tag nr + bb in lr -->

      <mat-form-field class="input" appearance="fill">
        <mat-label class="input-label">Tag nr</mat-label>
        <input
          type="text"
          data-cy="update-checkin-tag-nr"
          formControlName="tagNr"
          matInput
          placeholder="123"
        />
        <mat-error
          *ngIf="form.get('tagNr')?.invalid && form.get('tagNr')?.dirty"
        >
          Required
        </mat-error>
      </mat-form-field>

      <mat-form-field class="input" appearance="fill">
        <mat-label class="input-label">BB in LR</mat-label>
        <input
          type="text"
          data-cy="update-checkin-name"
          formControlName="bbLr"
          matInput
          placeholder="JD"
        />
        <mat-error *ngIf="form.get('bbLr')?.invalid && form.get('bbLr')?.dirty">
          Required
        </mat-error>
      </mat-form-field>
    </div>
    <div class="row-container">
      <!-- location + in room time -->
      <mat-form-field class="input" appearance="fill">
        <mat-label class="input-label">Location</mat-label>
        <input
          type="text"
          data-cy="update-checkin-location"
          formControlName="location"
          matInput
          placeholder="LR1"
        />
        <mat-error
          *ngIf="form.get('location')?.invalid && form.get('location')?.dirty"
        >
          Required
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <input
          matInput
          [ngxMatDatetimePicker]="pickerCompletedAt"
          placeholder="In room Time"
          formControlName="completedAt"
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="$any(pickerCompletedAt)"
        ></mat-datepicker-toggle>
        <ngx-mat-datetime-picker
          #pickerCompletedAt
          [showSpinners]="true"
          [showSeconds]="false"
          [touchUi]="true"
        >
        </ngx-mat-datetime-picker>
      </mat-form-field>
    </div>
    <div class="row-container">
      <!-- description -->
      <mat-form-field class="input full-width" appearance="fill">
        <mat-label class="input-label">Description</mat-label>
        <input
          type="text"
          data-cy="update-checkin-description"
          formControlName="description"
          matInput
          placeholder=""
        />
        <mat-error *ngIf="form.get('name')?.invalid && form.get('name')?.dirty">
          Required
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="action">
    <button
      mat-flat-button
      color="accent"
      class="action-button"
      data-cy="update-checkin-cancel-btn"
      mat-dialog-close
    >
      Cancel
    </button>
    <span
      class="action-button"
      [matTooltip]="form.invalid ? 'The provided data is invalid' : ''"
    >
      <button
        mat-flat-button
        color="primary"
        style="width: 100%"
        data-cy="update-checkin-create-btn"
        type="submit"
        [disabled]="form.invalid || isLoading"
      >
        <span *ngIf="!isLoading">Update</span>
        <mat-icon *ngIf="isLoading"
          ><mat-spinner diameter="21" color="accent"></mat-spinner
        ></mat-icon>
      </button>
    </span>
  </div>
</form>
